{% extends 'forms/secciones/base_seccion.html' %}
{% load static %}

{% block section_content %}
  {% include 'forms/form_sections/transformador.html' %}
  

  
{% endblock %}

{% block section_scripts %}
  <script>
    console.log('üîå Scripts espec√≠ficos de transformadores cargados');
    
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üîå Configurando Transformadores...');
      
      // SISTEMA COMPARTIDO DE ITERACIONES
      setTimeout(() => {
        if (typeof SistemaIteracionesCompartidasFinal !== 'undefined') {
          console.log('‚úÖ Sistema Compartido de Iteraciones disponible para Transformadores');
          // El sistema se auto-inicializa
        } else {
          console.error('‚ùå SistemaIteracionesCompartidasFinal no disponible');
        }
      }, 1000);
      
      // Verificar que el sistema unificado de tipos de inversi√≥n est√© disponible
      if (window.TiposInversionState) {
        console.log('‚úÖ Sistema unificado de tipos de inversi√≥n disponible para Transformadores');
        window.TiposInversionState.seccionActual = 'transformadores';
      } else {
        console.warn('‚ö†Ô∏è Sistema unificado de tipos de inversi√≥n no disponible');
      }
      
      // Verificar presencia de campos requeridos
      setTimeout(() => {
        const camposRequeridos = [
          { id: 't_inv', nombre: 'Tipo de Inversi√≥n' },
          { id: 'montaje_integral_checkbox', nombre: 'Checkbox Montaje Integral' },
          { id: 'desmantelado_checkbox', nombre: 'Checkbox Desmantelado' },
          { id: 'estructura_retirada_campo', nombre: 'Campo Estructura Retirada' }
        ];
        
        camposRequeridos.forEach(campo => {
          const elemento = document.getElementById(campo.id);
          if (elemento) {
            console.log(`‚úÖ ${campo.nombre} encontrado en Transformadores`);
          } else {
            console.warn(`‚ö†Ô∏è ${campo.nombre} NO encontrado en Transformadores`);
          }
        });
      }, 500);
      
      console.log('‚úÖ Transformadores configurados correctamente con sistema unificado');
    });
  </script>
{% endblock %}
