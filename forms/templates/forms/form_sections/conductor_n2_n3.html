<!-- Sección: Información del Proyecto - Conductor N2-N3 -->
<div class="bg-white rounded-lg shadow-sm p-8 mb-8">
  <h2 class="text-xl font-semibold mb-6 flex items-center text-blue-600">
    <i class="fas fa-project-diagram mr-2"></i>
    Información del Proyecto
  </h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="form-group">
      <label class="form-label required">
        NOMBRE DEL PROYECTO
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Selecciona el proyecto específico para este conductor N2-N3. Los
            proyectos disponibles dependen del contrato seleccionado.
          </span>
        </span>
      </label>
      <select
        id="conductor_n2_n3_nombre_proyecto"
        name="conductor_n2_n3_nombre_proyecto"
        class="form-select"
        required
      >
        <option value="">Seleccionar proyecto</option>
      </select>
    </div>
    <div class="form-group">
      <label class="form-label">
        BANCO DEL PROYECTO
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Código del banco asociado al proyecto. Se autocompletará
            automáticamente cuando selecciones un proyecto.
          </span>
        </span>
      </label>
      <input
        type="text"
        id="conductor_n2_n3_banco_proyecto"
        name="conductor_n2_n3_banco_proyecto"
        class="form-input bg-gray-50"
        placeholder="Se autocompletará según el proyecto"
        readonly
      />
    </div>
    <div class="form-group">
      <label class="form-label required">
        CONTRATO
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Contrato específico del proyecto. Determina qué municipios estarán
            disponibles según la regional asignada.
          </span>
        </span>
      </label>
      <select
        id="conductor_n2_n3_contrato"
        name="conductor_n2_n3_contrato"
        class="form-select"
        required
      >
        <option value="">Seleccionar contrato</option>
        <option value="CNRT-2023-001">CNRT-2023-001</option>
        <option value="CNRT-2023-002">CNRT-2023-002</option>
        <option value="CNRT-2023-003">CNRT-2023-003</option>
        <option value="CNRT-2023-004">CNRT-2023-004</option>
        <option value="CNRT-2023-005">CNRT-2023-005</option>
      </select>
    </div>
  </div>
</div>

<!-- Sección: Documentos y Archivos - Conductor N2-N3 -->
<div class="bg-white rounded-lg shadow-sm p-8 mb-8">
  <h2 class="text-xl font-semibold mb-6 flex items-center text-blue-600">
    <i class="fas fa-file-alt mr-2"></i>
    Documentos y Archivos
  </h2>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- AutoCAD -->
    <div class="space-y-4">
      <label class="form-label required">
        Archivo AutoCAD
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Archivo de diseño técnico en formato AutoCAD (.dwg, .dxf, .dws).
            Debe contener el plano del conductor N2-N3. Tamaño máximo: 50MB.
          </span>
        </span>
      </label>
      <div
        class="file-drop-zone border-blue-300 hover:border-blue-500 hover:bg-blue-50/50"
      >
        <input
          type="file"
          id="conductor_n2_n3_archivo_cad"
          name="conductor_n2_n3_archivo_cad"
          class="hidden"
          accept=".dwg,.dxf,.dws"
          required
        />
        <div class="text-center">
          <i class="fas fa-drafting-compass text-2xl text-blue-400 mb-2"></i>
          <p class="text-sm text-gray-600">Cargar archivo AutoCAD</p>
          <p class="text-xs text-gray-500 mt-1">.dwg, .dxf, .dws (máx. 50MB)</p>
        </div>
      </div>
      <!-- Preview AutoCAD -->
      <div id="conductor_n2_n3_cad_preview" class="hidden">
        <div
          class="flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <i class="fas fa-file-alt text-gray-400 text-xl mr-3"></i>
          <div class="flex-grow">
            <p
              class="text-sm font-medium text-gray-900"
              id="conductor_n2_n3_cad_filename"
            >
              archivo.dwg
            </p>
            <p class="text-xs text-gray-500" id="conductor_n2_n3_cad_filesize">
              2.5 MB
            </p>
          </div>
          <button
            type="button"
            onclick="removeFile('conductor_n2_n3_archivo_cad')"
            class="text-red-500 hover:text-red-700"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- KMZ -->
    <div class="space-y-4">
      <label class="form-label required">
        Archivo KMZ
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Archivo de geolocalización en formato KMZ de Google Earth. Debe
            contener las coordenadas exactas del conductor N2-N3. Tamaño máximo:
            10MB.
          </span>
        </span>
      </label>
      <div
        class="file-drop-zone border-blue-300 hover:border-blue-500 hover:bg-blue-50/50"
      >
        <input
          type="file"
          id="conductor_n2_n3_archivo_kmz"
          name="conductor_n2_n3_archivo_kmz"
          class="hidden"
          accept=".kmz,.kml"
          required
        />
        <div class="text-center">
          <i class="fas fa-globe text-2xl text-green-400 mb-2"></i>
          <p class="text-sm text-gray-600">Cargar archivo KMZ</p>
          <p class="text-xs text-gray-500 mt-1">.kmz, .kml (máx. 10MB)</p>
        </div>
      </div>
      <!-- Preview KMZ -->
      <div id="conductor_n2_n3_kmz_preview" class="hidden">
        <div
          class="flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <i class="fas fa-globe text-gray-400 text-xl mr-3"></i>
          <div class="flex-grow">
            <p
              class="text-sm font-medium text-gray-900"
              id="conductor_n2_n3_kmz_filename"
            >
              ubicacion.kmz
            </p>
            <p class="text-xs text-gray-500" id="conductor_n2_n3_kmz_filesize">
              0.8 MB
            </p>
          </div>
          <button
            type="button"
            onclick="removeFile('conductor_n2_n3_archivo_kmz')"
            class="text-red-500 hover:text-red-700"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Sección: Información Técnica - Conductor N2-N3 -->
<div
  class="bg-white rounded-lg shadow-sm p-8 mb-8"
  id="conductor_n2_n3_seccion-informacion-tecnica"
>
  <h2 class="text-xl font-semibold mb-6 flex items-center text-blue-600">
    <i class="fas fa-bolt mr-2"></i>
    Información Técnica
  </h2>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="form-group">
      <label class="form-label required">
        FECHA DE INSTALACION
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Fecha en la que se instaló. No puede ser posterior a la fecha
            actual.
          </span>
        </span>
      </label>
      <input
        type="date"
        id="conductor_n2_n3_fecha"
        name="conductor_n2_n3_fecha"
        class="form-input"
        required
      />
    </div>

    <div class="form-group">
      <label class="form-label required">
        NIVEL DE TENSIÓN
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Nivel de tensión eléctrica: 1-Baja Tensión (hasta 1kV), 2-Media
            Tensión (1-35kV), 3-Alta Tensión (mayor a 35kV).
          </span>
        </span>
      </label>
      <select
        id="conductor_n2_n3_nivel_tension"
        name="conductor_n2_n3_nivel_tension"
        class="form-select"
        required
      >
        <option value="">Seleccionar</option>
        <option value="1">1 - Baja Tensión</option>
        <option value="2">2 - Media Tensión</option>
        <option value="3">3 - Alta Tensión</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">
        TIPO DE INVERSION
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Tipo de inversión: I y III requieren estructura retirada, II y IV
            son instalaciones nuevas sin retirar estructura existente.
          </span>
        </span>
      </label>
      <div class="flex flex-wrap items-center gap-4">
        <select
          id="conductor_n2_n3_t_inv"
          name="conductor_n2_n3_t_inv"
          class="form-select flex-shrink-0"
          required
        >
          <option value="">Seleccionar</option>
          <option value="I">I</option>
          <option value="II">II</option>
          <option value="III">III</option>
          <option value="IV">IV</option>
        </select>
        
        <!-- Montaje Integral Checkbox -->
        <div id="conductor_n2_n3_montaje_integral_container" class="flex items-center gap-2" style="display: none;">
          <input 
            type="checkbox" 
            id="conductor_n2_n3_montaje_integral_checkbox" 
            name="conductor_n2_n3_montaje_integral" 
            class="form-checkbox"
            onchange="toggleMontajeIntegral('conductor_n2_n3')"
          />
          <label for="conductor_n2_n3_montaje_integral_checkbox" class="text-sm font-medium text-gray-700">
            Montaje Integral
          </label>
        </div>
        
        <!-- Desmantelado Checkbox -->
        <div id="conductor_n2_n3_desmantelado_container" class="flex items-center gap-2" style="display: none;">
          <input 
            type="checkbox" 
            id="conductor_n2_n3_desmantelado_checkbox" 
            name="conductor_n2_n3_desmantelado" 
            class="form-checkbox"
            onchange="toggleDesmantelado('conductor_n2_n3')"
          />
          <label for="conductor_n2_n3_desmantelado_checkbox" class="text-sm font-medium text-gray-700">
            Desmantelado
          </label>
        </div>
      </div>
      
      <!-- Help text for Desmantelado -->
      <div id="conductor_n2_n3_desmantelado_help" class="mt-2 text-sm text-gray-600" style="display: none;">
        <i class="fas fa-info-circle text-blue-500"></i>
        Modo desmantelado activo: Se deshabilitarán los campos de coordenadas y se habilitará el campo de estructura retirada.
      </div>
    </div>

    <div class="form-group">
      <label class="form-label required">
        MUNICIPIO
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Municipio donde se instalará la estructura. Los municipios
            disponibles dependen de la regional seleccionada.
          </span>
        </span>
      </label>
      <select
        id="conductor_n2_n3_municipio"
        name="conductor_n2_n3_municipio"
        class="form-select"
        required
      >
        <option value="">Seleccionar municipio</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">
        DEPARTAMENTO
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Departamento donde se encuentra el municipio seleccionado. Se
            autocompletará según el municipio.
          </span>
        </span>
      </label>
      <input
        type="text"
        id="conductor_n2_n3_departamento"
        name="conductor_n2_n3_departamento"
        class="form-input bg-gray-50"
        placeholder="Se autocompletará según el municipio"
        readonly
        required
      />
    </div>

    <div class="form-group">
      <label class="form-label required">
        REGIONAL
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Regional responsable del proyecto. Se autocompletará según el
            contrato o municipio seleccionado.
          </span>
        </span>
      </label>
      <input
        type="text"
        id="conductor_n2_n3_regional"
        name="conductor_n2_n3_regional"
        class="form-input bg-gray-100 text-gray-500 cursor-not-allowed"
        placeholder="Se autocompletará según contrato o municipio"
        readonly
        required
      />
    </div>

    <div class="form-group">
      <label class="form-label required">DIRECCIÓN</label>
      <input
        type="text"
        id="conductor_n2_n3_direccion"
        name="conductor_n2_n3_direccion"
        class="form-input"
        placeholder="Dirección completa"
        required
      />
    </div>

    <div class="form-group">
      <label class="form-label required">
        CIRCUITO
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Circuito eléctrico (alimentador) al que se conecta la estructura. Se
            actualiza automáticamente según el municipio seleccionado.
          </span>
        </span>
      </label>
      <select
        id="conductor_n2_n3_alimentador"
        name="conductor_n2_n3_alimentador"
        class="form-select"
        required
      >
        <option value="">Seleccionar</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">
        ESTRUCTURA RETIRADA
        <span class="tooltip">
          <i class="fas fa-question-circle help-icon"></i>
          <span class="tooltip-content">
            Código de la estructura que se retira. Solo se habilita para tipos
            de inversión I y III. Debe empezar con "Z" seguido de números.
          </span>
        </span>
      </label>
      <div class="space-y-3">
        <input
          type="text"
          id="conductor_n2_n3_estructura_retirada_campo"
          name="conductor_n2_n3_estructura_retirada_campo"
          class="form-input bg-yellow-50"
          placeholder="Z10000"
          disabled
        />
      </div>
    </div>

    <!-- Campos de coordenadas -->
    <div class="md:col-span-3">
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
        <div class="form-group">
          <label
            class="form-label required"
            id="conductor_n2_n3_longitud_label"
          >
            LONGITUD
            <span class="tooltip">
              <i class="fas fa-question-circle help-icon"></i>
              <span class="tooltip-content">
                Coordenada de Longitud (grados decimales) de la ubicación en
                Colombia. Rango válido: -79.0 a -66.8 (valores negativos hacia
                el oeste).
              </span>
            </span>
          </label>
          <input
            type="number"
            id="conductor_n2_n3_longitud"
            name="conductor_n2_n3_longitud"
            class="form-input"
            placeholder="-74.0721"
            step="0.000001"
            min="-79.0"
            max="-66.8"
            required
            oninput="validateCoordinate(this, 'longitud')"
          />
        </div>

        <div class="form-group">
          <label class="form-label required" id="conductor_n2_n3_latitud_label">
            LATITUD
            <span class="tooltip">
              <i class="fas fa-question-circle help-icon"></i>
              <span class="tooltip-content">
                Coordenada de Latitud (grados decimales) de la ubicación en
                Colombia. Rango válido: -4.2 a 15.5 (positivo hacia el norte).
              </span>
            </span>
          </label>
          <input
            type="number"
            id="conductor_n2_n3_latitud"
            name="conductor_n2_n3_latitud"
            class="form-input"
            placeholder="4.7110"
            step="0.000001"
            min="-4.2"
            max="15.5"
            required
            oninput="validateCoordinate(this, 'latitud')"
          />
        </div>

        <div
          class="form-group"
          id="conductor_n2_n3_longitud_final_group"
          style="display: none"
        >
          <label class="form-label" id="conductor_n2_n3_longitud_final_label">
            LONGITUD FINAL
            <span class="tooltip">
              <i class="fas fa-question-circle help-icon"></i>
              <span class="tooltip-content">
                Coordenada de Longitud Final (grados decimales) de la ubicación
                final en Colombia. Rango válido: -79.0 a -66.8 (valores
                negativos hacia el oeste).
              </span>
            </span>
          </label>
          <input
            type="number"
            id="conductor_n2_n3_longitud_final"
            name="conductor_n2_n3_longitud_final"
            class="form-input"
            placeholder="-74.0721"
            step="0.000001"
            min="-79.0"
            max="-66.8"
            oninput="validateCoordinate(this, 'longitud')"
          />
        </div>

        <div
          class="form-group"
          id="conductor_n2_n3_latitud_final_group"
          style="display: none"
        >
          <label class="form-label" id="conductor_n2_n3_latitud_final_label">
            LATITUD FINAL
            <span class="tooltip">
              <i class="fas fa-question-circle help-icon"></i>
              <span class="tooltip-content">
                Coordenada de Latitud Final (grados decimales) de la ubicación
                final en Colombia. Rango válido: -4.2 a 15.5 (positivo hacia el
                norte).
              </span>
            </span>
          </label>
          <input
            type="number"
            id="conductor_n2_n3_latitud_final"
            name="conductor_n2_n3_latitud_final"
            class="form-input"
            placeholder="4.7110"
            step="0.000001"
            min="-4.2"
            max="15.5"
            oninput="validateCoordinate(this, 'latitud')"
          />
        </div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label required">CANTIDAD TOTAL DE ESTRUCTURAS</label>
      <input
        type="number"
        id="conductor_n2_n3_cantidad"
        name="conductor_n2_n3_cantidad"
        class="form-input"
        placeholder="1"
        min="1"
        value="1"
        required
      />
    </div>

    <div class="form-group">
      <label class="form-label required">NÚMERO DE CONDUCTORES</label>
      <input
        type="text"
        id="conductor_n2_n3_numero_conductores"
        name="conductor_n2_n3_numero_conductores"
        class="form-input"
        placeholder="0"
        value="0"
      />
    </div>
  </div>
</div>

<!-- Sección: Detalles del Conductor N2-N3 -->
<div class="bg-white rounded-lg shadow-sm p-8 mb-8">
  <h2 class="text-xl font-semibold mb-6 flex items-center text-orange-600">
    <i class="fas fa-bolt mr-2"></i>
    Detalles del Conductor N2-N3
  </h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div class="form-group">
      <label class="form-label required">CALIBRE DEL CONDUCTOR N2</label>
      <select
        id="conductor_n2_n3_calibre_n2"
        name="conductor_n2_n3_calibre_n2"
        class="form-select"
        required
      >
        <option value="">Seleccionar calibre</option>
        <option value="2 AWG">2 AWG</option>
        <option value="1/0 AWG">1/0 AWG</option>
        <option value="2/0 AWG">2/0 AWG</option>
        <option value="4/0 AWG">4/0 AWG</option>
        <option value="266.8 MCM">266.8 MCM</option>
        <option value="336.4 MCM">336.4 MCM</option>
        <option value="477 MCM">477 MCM</option>
        <option value="795 MCM">795 MCM</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">MATERIAL DEL CONDUCTOR N2</label>
      <select
        id="conductor_n2_n3_material_n2"
        name="conductor_n2_n3_material_n2"
        class="form-select"
        required
      >
        <option value="">Seleccionar material</option>
        <option value="aluminio">Aluminio</option>
        <option value="cobre">Cobre</option>
        <option value="acsr">ACSR</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">TIPO DE AISLAMIENTO N2</label>
      <select
        id="conductor_n2_n3_aislamiento_n2"
        name="conductor_n2_n3_aislamiento_n2"
        class="form-select"
        required
      >
        <option value="">Seleccionar aislamiento</option>
        <option value="xlpe">XLPE</option>
        <option value="pvc">PVC</option>
        <option value="epr">EPR</option>
        <option value="desnudo">Desnudo</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">CALIBRE DEL CONDUCTOR N3</label>
      <select
        id="conductor_n2_n3_calibre_n3"
        name="conductor_n2_n3_calibre_n3"
        class="form-select"
        required
      >
        <option value="">Seleccionar calibre</option>
        <option value="2 AWG">2 AWG</option>
        <option value="1/0 AWG">1/0 AWG</option>
        <option value="2/0 AWG">2/0 AWG</option>
        <option value="4/0 AWG">4/0 AWG</option>
        <option value="266.8 MCM">266.8 MCM</option>
        <option value="336.4 MCM">336.4 MCM</option>
        <option value="477 MCM">477 MCM</option>
        <option value="795 MCM">795 MCM</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">MATERIAL DEL CONDUCTOR N3</label>
      <select
        id="conductor_n2_n3_material_n3"
        name="conductor_n2_n3_material_n3"
        class="form-select"
        required
      >
        <option value="">Seleccionar material</option>
        <option value="aluminio">Aluminio</option>
        <option value="cobre">Cobre</option>
        <option value="acsr">ACSR</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">TIPO DE AISLAMIENTO N3</label>
      <select
        id="conductor_n2_n3_aislamiento_n3"
        name="conductor_n2_n3_aislamiento_n3"
        class="form-select"
        required
      >
        <option value="">Seleccionar aislamiento</option>
        <option value="xlpe">XLPE</option>
        <option value="pvc">PVC</option>
        <option value="epr">EPR</option>
        <option value="desnudo">Desnudo</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label required">LONGITUD TOTAL N2-N3 (m)</label>
      <input
        type="number"
        id="conductor_n2_n3_longitud_total"
        name="conductor_n2_n3_longitud_total"
        class="form-input"
        placeholder="200"
        min="1"
        step="0.1"
        required
      />
    </div>

    <div class="form-group">
      <label class="form-label">OBSERVACIONES N2-N3</label>
      <textarea
        id="conductor_n2_n3_observaciones"
        name="conductor_n2_n3_observaciones"
        class="form-input"
        rows="3"
        placeholder="Observaciones adicionales sobre conductores N2-N3"
      ></textarea>
    </div>

    <div class="form-group">
      <label class="form-label required">ESTADO DE INSTALACIÓN</label>
      <select
        id="conductor_n2_n3_estado_n2_n3"
        name="conductor_n2_n3_estado_n2_n3"
        class="form-select"
        required
      >
        <option value="">Seleccionar estado</option>
        <option value="nuevo">Nuevo</option>
        <option value="existente">Existente</option>
        <option value="reparado">Reparado</option>
      </select>
    </div>
  </div>

  <!-- Fotos del Conductor N2-N3 -->
  <div class="mt-6">
    <label class="form-label required">Fotografías del Conductor N2-N3</label>
    <div
      class="file-drop-zone border-orange-300 hover:border-orange-500 hover:bg-orange-50/50"
    >
      <input
        type="file"
        id="conductor_n2_n3_fotos_conductor_n2_n3"
        name="conductor_n2_n3_fotos_conductor_n2_n3"
        class="hidden"
        accept="image/*"
        multiple
        required
      />
      <div class="text-center">
        <i class="fas fa-camera text-2xl text-orange-400 mb-2"></i>
        <p class="text-sm text-gray-600">
          Arrastra las fotos aquí o haz clic para seleccionar
        </p>
        <p class="text-xs text-gray-500 mt-1">
          Se requiere al menos 1 foto (JPG, PNG, máx. 5MB)
        </p>
      </div>
    </div>
    <div
      id="conductor_n2_n3_preview_conductor_n2_n3"
      class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4 mt-4"
    ></div>
  </div>
</div>
